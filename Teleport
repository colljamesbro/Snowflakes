-- Services
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local UserInputService = game:GetService("UserInputService")

-- Variables
local spawnPoint = nil

-- Function to set spawn point
local function setSpawnPoint()
    if Character:FindFirstChild("HumanoidRootPart") then
        spawnPoint = Character.HumanoidRootPart.Position
        print("Spawn point set at: " .. tostring(spawnPoint))
    else
        warn("HumanoidRootPart not found!")
    end
end

-- Function to teleport to spawn point on respawn
local function onRespawn()
    if spawnPoint then
        Character:WaitForChild("HumanoidRootPart").CFrame = CFrame.new(spawnPoint)
        print("Teleported to spawn point: " .. tostring(spawnPoint))
    else
        warn("No spawn point set!")
    end
end

-- Keybind to set spawn point
UserInputService.InputBegan:Connect(function(input, isProcessed)
    if isProcessed then return end
    if input.KeyCode == Enum.KeyCode.LeftControl then -- Press Ctrl to set spawn point
        setSpawnPoint()
    end
end)

-- Listen for character respawn
LocalPlayer.CharacterAdded:Connect(function(newCharacter)
    Character = newCharacter
    onRespawn()
end)

print("Press 'Ctrl' to set your spawn point!")
